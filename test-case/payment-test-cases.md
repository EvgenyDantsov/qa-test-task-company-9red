## TC-01 — Successful Payment with Valid Card Data

**ID:** TC-01

**Название:** Successful payment with valid card data

**Предусловия:**
- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**
1. Ввести валидный номер банковской карты
2. Ввести корректную дату окончания срока действия
3. Ввести корректный CVV
4. Нажать кнопку «Оплатить»
5. При редиректе на 3-D Secure — успешно пройти аутентификацию

**Ожидаемый результат:**
- Клиентская валидация проходит успешно
- Данные отправляются в платежный шлюз
- Платёжный шлюз возвращает статус "Успешно"
- Статус заказа обновляется на "Оплачен"
- Пользователю отображается сообщение об успешной оплате
- На email пользователя отправляется чек 
---

## TC-02 — Payment declined by bank 

**ID:** TC-02 

**Название:** Payment declined by bank 

**Предусловия:** 

- Пользователь авторизован 
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты 
- Используем карту на которой недостаточно средств 

**Шаги:** 

1. Ввести валидный номер банковской карты 
2. Ввести корректную дату окончания срока действия 
3. Ввести корректный CVV 
4. Нажать кнопку «Оплатить» 
5. При редиректе на 3-D Secure — успешно пройти аутентификацию 

**Ожидаемый результат:** 

- Клиентская валидация проходит успешно 
- Данные отправляются в платежный шлюз 
- Платежный шлюз возвращает статус “Declined” 
- Статус заказа не изменяется на “Оплачен” 
- Пользователю отображается сообщение об отклонении платежа
- Email с чеком не отправляется
---

## TC-03 — Payment service error

**ID:** TC-03

**Название:** Payment service error

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести валидный номер банковской карты
2. Ввести корректную дату окончания срока действия
3. Ввести корректный CVV
4. Нажать кнопку «Оплатить»
5. При редиректе на 3-D Secure — успешно пройти аутентификацию

**Ожидаемый результат:**

- Клиентская валидация проходит успешно
- Данные отправляются в платежный шлюз
- Платежный шлюз возвращает ошибку с кодом 500
- Статус заказа не изменяется на “Оплачен”
- Пользователю отображается сообщение о временной ошибке сервиса
- Пользователь может повторить попытку оплаты
- Email с чеком не отправляется
---

## TC-04 — 3-D Secure authentication failed

**ID:** TC-04

**Название:** 3-D Secure authentication failed

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести валидный номер банковской карты
2. Ввести корректную дату окончания срока действия
3. Ввести корректный CVV
4. Нажать кнопку «Оплатить»
5. При редиректе на 3-D Secure — ввести неверные данные

**Ожидаемый результат:**

- Клиентская валидация проходит успешно
- Данные отправляются в платежный шлюз
- После ввода неверных данных в  3-D Secure шлюз возвращает статус "Authentication Failed"
- Статус заказа не изменяется на “Оплачен”
- Пользователю отображается сообщение о неуспешной аутентификации
- Пользователь может повторить попытку оплаты
- Email с чеком не отправляется
---

## TC-05 — Invalid card number

**ID:** TC-05

**Название:** Invalid card number

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести невалидный номер банковской карты
2. Ввести корректную дату окончания срока действия
3. Ввести корректный CVV
4. Нажать кнопку «Оплатить»

**Ожидаемый результат:**

- Клиентская валидация блокирует оплату
- Данные **не отправляются** в платежный шлюз
- Пользователю отображается сообщение о некорректном номере карты
- Статус заказа не изменяется на “Оплачен”
- Email с чеком не отправляется
- Пользователь может повторить попытку оплаты
---

## TC-06 — CVV too short

**ID:** TC-06

**Название:** CVV too short (less than 3 digits)

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести валидный номер карты
2. Ввести корректную дату окончания
3. Ввести CVV из 2 цифр
4. Нажать «Оплатить»

**Ожидаемый результат:**

- Клиентская валидация блокирует оплату
- Данные не отправляются в платежный шлюз
- Пользователю отображается сообщение о неверном CVV
- Статус заказа не изменяется на “Оплачен”
- Email с чеком не отправляется
- Пользователь может повторить попытку оплаты
---

## TC-07 — CVV too long

**ID:** TC-07

**Название:** CVV too long (more than 3 digits)

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести валидный номер карты
2. Ввести корректную дату окончания
3. Ввести CVV из 4 цифр
4. Нажать «Оплатить»

**Ожидаемый результат:**

- Клиентская валидация блокирует оплату
- Данные не отправляются в платежный шлюз
- Пользователю отображается сообщение о неверном CVV
- Статус заказа не изменяется на “Оплачен”
- Email с чеком не отправляется
- Пользователь может повторить попытку оплаты
---

## TC-08 — Сard number too short

**ID:** TC-08

**Название:** Card number too short (less than 15 digits)

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести номер карты из 15 цифр
2. Ввести корректную дату окончания
3. Ввести корректный CVV
4. Нажать «Оплатить»

**Ожидаемый результат:**

- Клиентская валидация блокирует оплату
- Данные не отправляются в платежный шлюз
- Пользователю отображается сообщение о неверном номере карты
- Статус заказа не изменяется на “Оплачен”
- Email с чеком не отправляется
- Пользователь может повторить попытку оплаты
---

## TC-09 — Сard number too long

**ID:** TC-09

**Название:** Card number too long (more than 16 digits)

**Предусловия:**

- Пользователь авторизован
- В корзине есть хотя бы один товар
- Пользователь находится на странице оплаты

**Шаги:**

1. Ввести номер карты из 17 цифр
2. Ввести корректную дату окончания
3. Ввести корректный CVV
4. Нажать «Оплатить»

**Ожидаемый результат:**

- Клиентская валидация блокирует оплату
- Данные не отправляются в платежный шлюз
- Пользователю отображается сообщение о неверном номере карты
- Статус заказа не изменяется на “Оплачен”
- Email с чеком не отправляется
- Пользователь может повторить попытку оплаты